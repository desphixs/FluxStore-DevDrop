{% extends 'base/base.html' %}
{% block title %}Login{% endblock %}
{% block content %}
<div class="flex items-center justify-center min-h-screen px-4 mt-52">
  <div class="w-full max-w-lg p-8 space-y-6 bg-white rounded-2xl shadow-md border border-gray-100">
    <header class="text-center">
      <h1 class="text-2xl font-bold text-gray-900">Create Vendor Account</h1>
      <p class="mt-1 text-sm text-gray-600">Sign up as a vendor and launch your store.</p>
    </header>

    {# Django messages (success/error) #}
    {% if messages %}
      <div class="space-y-2">
        {% for message in messages %}
          <div class="rounded-lg border px-4 py-3 text-sm
                      {% if message.tags == 'success' %}border-emerald-300 bg-emerald-50 text-emerald-800
                      {% elif message.tags == 'error' %}border-red-300 bg-red-50 text-red-800
                      {% else %}border-gray-300 bg-gray-50 text-gray-800{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" class="space-y-6">
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ next_url|default:'' }}">

      <!-- Account -->
      <section>
        <h2 class="text-sm font-semibold text-gray-900">Account</h2>
        <div class="mt-3 grid grid-cols-1 gap-4">
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
            <input id="email" name="email" type="email" required
                   value="{{ prefill.email|default:'' }}"
                   class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400
                          focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
          </div>

          <div>
            <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
            <input id="username" name="username" type="text" required
                   value="{{ prefill.username|default:'' }}"
                   class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400
                          focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
          </div>

          <div>
            <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
            <div class="mt-1 relative">
              <input id="password" name="password" type="password" required
                     class="w-full rounded-lg border border-gray-300 px-3 py-2 pr-10 text-gray-900 placeholder-gray-400
                            focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
              <button type="button" data-toggle="pw" data-target="#password"
                      class="absolute inset-y-0 right-2 my-auto text-gray-500 text-sm">Show</button>
            </div>
          </div>

          <div>
            <label for="password2" class="block text-sm font-medium text-gray-700">Confirm Password</label>
            <div class="mt-1 relative">
              <input id="password2" name="password2" type="password" required
                     class="w-full rounded-lg border border-gray-300 px-3 py-2 pr-10 text-gray-900 placeholder-gray-400
                            focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
              <button type="button" data-toggle="pw" data-target="#password2"
                      class="absolute inset-y-0 right-2 my-auto text-gray-500 text-sm">Show</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Business -->
      <section>
        <div class="flex items-center justify-between">
          <h2 class="text-sm font-semibold text-gray-900">Business</h2>
          <span class="text-xs text-gray-500">Weâ€™ll set this up as your store profile</span>
        </div>

        <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div class="sm:col-span-2">
            <label for="business_name" class="block text-sm font-medium text-gray-700">Business name</label>
            <input id="business_name" name="business_name" type="text" required
                   value="{{ prefill.business_name|default:'' }}"
                   class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400
                          focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
          </div>

          <div>
            <label for="contact_email" class="block text-sm font-medium text-gray-700">Contact email</label>
            <input id="contact_email" name="contact_email" type="email"
                   value="{{ prefill.contact_email|default:'' }}"
                   class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400
                          focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
          </div>

          <div>
            <label for="business_phone" class="block text-sm font-medium text-gray-700">Phone</label>
            <input id="business_phone" name="business_phone" type="text"
                   value="{{ prefill.business_phone|default:'' }}"
                   class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400
                          focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
          </div>

          <div class="sm:col-span-2">
            <label for="business_address" class="block text-sm font-medium text-gray-700">Address</label>
            <input id="business_address" name="business_address" type="text"
                   value="{{ prefill.business_address|default:'' }}"
                   class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400
                          focus:outline-none focus:ring-2 focus:ring-[#991b1b] focus:border-[#991b1b]">
          </div>
        </div>
      </section>

      <!-- Submit -->
      <div class="pt-2">
        <button class="w-full inline-flex items-center justify-center rounded-lg bg-[#991b1b] px-4 py-2.5 text-white font-semibold
                       hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#991b1b]">
          Create Vendor
        </button>
        <p class="mt-3 text-center text-sm text-gray-600">
          Already have an account?
          <a href="{% url 'userauths:login' %}{% if next_url %}?next={{ next_url }}{% endif %}"
             class="font-medium text-[#991b1b] hover:underline">Log in</a>
        </p>
      </div>
    </form>
  </div>
</div>

<script>
  // simple show/hide for both password fields
  document.querySelectorAll('[data-toggle="pw"]').forEach(btn => {
    btn.addEventListener('click', () => {
      const input = document.querySelector(btn.getAttribute('data-target'));
      if (!input) return;
      const isPw = input.type === 'password';
      input.type = isPw ? 'text' : 'password';
      btn.textContent = isPw ? 'Hide' : 'Show';
    });
  });
</script>
{% endblock %}
